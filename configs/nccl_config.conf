# NCCL Configuration for SpectrumX H200 Cluster
# Optimized for RoCEv2 with 400GbE x2

# HCA/Bond interface
NCCL_IB_HCA=mlx5_0,mlx5_1
NCCL_SOCKET_IFNAME=bond0

# GID index = RoCEv2 (Datacenter)
NCCL_IB_GID_INDEX=3

# Multi-rail & buffer settings
NCCL_IB_TC=106
NCCL_IB_QPS_PER_CONNECTION=4
NCCL_BUFFSIZE=8388608      # 8MB for large data transfers

# Algorithm selection
NCCL_ALGO=Ring,Tree
NCCL_COLLNET_ENABLE=0      # Off for SpectrumX RoCE

# Debug level
NCCL_DEBUG=WARN

# Additional optimizations for H200
NCCL_TOPO_FILE=/etc/nccl-topo.xml
NCCL_P2P_DISABLE=0
NCCL_SHM_DISABLE=0
NCCL_TREE_THRESHOLD=0